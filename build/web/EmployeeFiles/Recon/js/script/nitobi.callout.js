if(typeof (nitobi)=="undefined"||typeof (nitobi.lang)=="undefined"){
alert("The Nitobi framework source could not be found. Is it included before any other Nitobi components?");
}
nitobi.lang.defineNs("nitobi.callout");
if(false){
nitobi.callout=function(){
};
}
nitobi.callout.Callout=function(_1){
nitobi.prepare();
this.uid=Math.random().toString().replace(".","").replace("0","");
nitobi.callout.Callout.refs[nitobi.callout.Callout.refs.length]=this;
this.ver="1.00";
this.titlehtml="";
this.stylesheet="xp";
this.allowOffScreen=true;
if(_1!=null){
this.stylesheet=_1.toLowerCase();
}
this.Is=function(){
this.opera=false;
_2=navigator.userAgent.toLowerCase();
this.major=parseInt(navigator.appVersion);
this.minor=parseFloat(navigator.appVersion);
this.firefox=false;
if(navigator.userAgent.indexOf("Firefox")!=-1){
this.firefox=true;
}
this.ns=((_2.indexOf("mozilla")!=-1)&&(_2.indexOf("spoofer")==-1)&&(_2.indexOf("compatible")==-1)&&(_2.indexOf("opera")==-1)&&(_2.indexOf("webtv")==-1)&&(_2.indexOf("hotjava")==-1));
this.ns2=(this.ns&&(this.major==2));
this.ns3=(this.ns&&(this.major==3));
this.ns4=(this.ns&&(this.major==4));
this.ns6=(this.ns&&(this.major>=5));
this.ie=((_2.indexOf("msie")!=-1)&&(_2.indexOf("opera")==-1));
this.ie3=(this.ie&&(this.major<4));
this.ie4=(this.ie&&(this.major==4)&&(_2.indexOf("msie 4")!=-1));
this.ie5=(this.ie&&(this.major==4)&&(_2.indexOf("msie 5.")!=-1)&&(_2.indexOf("msie 5.5")==-1)&&(_2.indexOf("mac")==-1));
this.ie6=(this.ie&&(this.major==4)&&(_2.indexOf("msie 6.")!=-1));
this.ie7=(this.ie&&(this.major==4)&&(_2.indexOf("msie 7.0")!=-1));
if(_2.indexOf("opera")==0){
this.opera=true;
}
};
var _2=navigator.userAgent.toLowerCase();
if(_2.indexOf("opera")==0){
this.opera=true;
}
if(_2.indexOf("Firefox")!=-1){
this.firefox=true;
}
if(_2.indexOf("msie")==0){
this.ie=true;
}
this.ContainerNames=Array();
this.Containers=Array();
this.MasterContainer=document.createElement("div");
this.MasterContainer.innerHTML="";
this.MasterContainer.setAttribute("id","ntbCalloutMasterContainer"+this.uid);
this.MasterContainer.object=this;
this.MasterContainer.style.position="absolute";
this.MasterContainer.style.top="0px";
this.MasterContainer.style.left="0px";
this.timerObject=null;
this.expireObj=null;
this.object=this;
this.absWidth=0;
this.absHeight=0;
this.zSpot=(nitobi.callout.Callout.refs.length*10)+1000000;
this.ondestroy=null;
this.onappear=null;
this.onScreenUpdate=null;
this.timeOut=-1;
this.x=0;
this.y=0;
this.ax=0;
this.ay=0;
this.width=0;
this.height=0;
this.MasterContainer.style.visibility="hidden";
this.MasterContainer.style.zIndex=this.zSpot.toString();
document.getElementsByTagName("body").item(0).appendChild(this.MasterContainer);
for(var t=0;t<6;t++){
this.ContainerNames[t]="ntbCalloutContainer"+t+"_"+this.uid;
this.Containers[t]=document.createElement("div");
this.Containers[t].innerHTML="";
this.Containers[t].setAttribute("id",this.ContainerNames[t]);
this.Containers[t].object=this;
this.MasterContainer.appendChild(this.Containers[t]);
this.Containers[t].style.position="absolute";
this.Containers[t].style.top="0px";
this.Containers[t].style.left="0px";
this.Containers[t].style.zIndex=this.zSpot.toString();
}
this.TitleElement="ntbCalloutTitle_"+this.uid;
this.TitleElement=document.createElement("div");
this.TitleElement.innerHTML="";
this.TitleElement.setAttribute("id","title"+this.uid);
this.TitleElement.object=this;
this.MasterContainer.appendChild(this.TitleElement);
this.TitleElement.style.position="absolute";
this.TitleElement.style.zIndex=(this.zSpot+1).toString();
this.TitleElement.style.visibility="visible";
this.TitleElement.style.display="block";
this.CloseElement="ntbCalloutClose_"+this.uid;
this.CloseElement=document.createElement("div");
this.CloseElement.innerHTML="";
this.CloseElement.setAttribute("id","close"+this.uid);
this.CloseElement.object=this;
this.MasterContainer.appendChild(this.CloseElement);
this.CloseElement.style.position="absolute";
this.CloseElement.style.zIndex=(this.zSpot+5).toString();
this.CloseElement.style.visibility="visible";
this.CloseElement.style.display="block";
this.CloseElement.className="ntb"+this.stylesheet+"Callout_close_off";
this.CloseElement.onmouseover=function(){
try{
var _4=this.className.replace("_off","_on");
this.className=_4;
}
catch(e){
}
};
this.CloseElement.onmouseout=function(){
try{
var _5=this.className.replace("_on","_off");
this.className=_5;
}
catch(e){
}
};
this.CloseElement.onmousedown=function(){
try{
var _6=this.className.replace("_on","_off");
this.className=_6;
}
catch(e){
}
};
var _7=this;
this.CloseElement.onmouseup=function(){
try{
var _8=this.className.replace("_off","_on");
this.className=_8;
}
catch(e){
}
_7.destroy();
return false;
};
this.CloseElement.onclick=function(){
return false;
};
this.BodyElement="ntbCalloutBody_"+this.uid;
this.BodyElement=document.createElement("div");
this.BodyElement.innerHTML="";
this.BodyElement.setAttribute("id","body"+this.uid);
this.BodyElement.object=this;
this.MasterContainer.appendChild(this.BodyElement);
this.BodyElement.style.position="absolute";
this.BodyElement.style.zIndex=(this.zSpot+4).toString();
this.BodyElement.style.visibility="visible";
this.BodyElement.style.display="block";
this.StyleSheetUrl=nitobi.callout.Callout.getStyleSheetUrl();
this.setMode("INACTIVE");
this.CalloutMinWidth=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_minimums","width");
this.CalloutMinHeight=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_minimums","height");
this.CalloutContentWidth=200;
this.CalloutContentHeight=0;
if(this.CalloutContentWidth<this.CalloutMinWidth){
this.CalloutContentWidth=this.CalloutMinWidth;
}
if(this.CalloutContentHeight<this.CalloutMinHeight){
this.CalloutContentHeight=this.CalloutMinHeight;
}
this.CalloutDirection=0;
this.setCalloutDirection(1);
if(nitobi.callout.Callout.refs.length==1){
if(window.addEventListener){
window.addEventListener("scroll",nitobi.callout.Callout.update,false);
window.addEventListener("resize",nitobi.callout.Callout.update,false);
}else{
if(window.attachEvent){
window.attachEvent("onscroll",nitobi.callout.Callout.update);
window.attachEvent("onresize",nitobi.callout.Callout.update);
}
}
}
this.setTitle("");
this.bodyHTML="";
this.useBody=false;
this.setBody("");
this.effectName="APPEAR";
this.opacity=1;
this.setEffect("FADE");
this.setOpacity(0);
};
nitobi.callout.Callout.styleArray=Array();
nitobi.callout.Callout.ruleArray=Array();
nitobi.callout.Callout.globalStylesheet;
nitobi.callout.Callout.precachedImages=Array();
nitobi.callout.Callout.refs=Array();
nitobi.callout.Callout.permHeight=0;
nitobi.callout.Callout.permWidth=0;
nitobi.callout.Callout.globalStyleSheetName="nitobi.attention.css";
nitobi.callout.Callout.rewriteId=function(_9){
try{
document.getElementById(_9).id=_9;
}
catch(e){
try{
for(var i=0;i<document.forms.length;i++){
for(var b=0;b<document.forms[i].elements.length;b++){
if(document.forms[i].elements[b].name.toUpperCase()==_9.toUpperCase()){
document.forms[i].elements[b].id=_9;
}
}
}
}
catch(e){
}
}
};
nitobi.callout.Callout.update=function(){
var t,o;
for(t=0;t<nitobi.callout.Callout.refs.length;t++){
o=nitobi.callout.Callout.refs[t];
clearTimeout(o.timerObject);
o.timerObject=setTimeout("nitobi.callout.Callout.refs["+t+"].updateCallout()",150);
}
};
nitobi.callout.destroyAll=function(){
var t,o;
for(t=0;t<nitobi.callout.Callout.refs.length;t++){
o=nitobi.callout.Callout.refs[t];
o.destroy();
}
};
nitobi.callout.destroyLast=function(){
var t,o;
for(t=0;t<nitobi.callout.Callout.refs.length;t++){
o=nitobi.callout.Callout.refs[t];
}
try{
o.destroy();
}
catch(e){
}
};
nitobi.callout.Callout.prototype.setOnScreenUpdate=function(_12){
this.onScreenUpdate=_12;
};
nitobi.callout.Callout.prototype.setOnDestroy=function(_13){
this.ondestroy=_13;
};
nitobi.callout.Callout.prototype.setOnAppear=function(_14){
this.onappear=_14;
};
nitobi.callout.Callout.prototype.setExpire=function(_15){
this.timeOut=_15;
var ds=this;
this.expireObj=setTimeout(function(){
ds.destroy();
},_15);
};
nitobi.callout.Callout.prototype.setSize=function(_17,_18){
this.absWidth=_17;
this.absHeight=_18;
this.setTitle(this.titlehtml);
};
nitobi.callout.Callout.prototype.getPosition=function(){
return {x:this.ax,y:this.ay};
};
nitobi.callout.Callout.prototype.setEffect=function(_19){
this.effectName="FADE";
};
nitobi.callout.Callout.prototype.setTitle=function(_1a){
this.titlehtml=_1a;
if(_1a.length>0){
this.useTitle=true;
}else{
this.useTitle=false;
}
if(this.useTitle){
try{
this.TitleElement.style.visibility="visible";
this.TitleElement.className="ntb"+this.stylesheet+"Callout_titlediv"+this.CalloutDirection;
this.TitleElement.innerHTML=this.titlehtml;
if(this.CalloutContentWidth<this.TitleElement.offsetWidth+30){
this.CalloutContentWidth=this.TitleElement.offsetWidth+30;
}
this.setBody(this.bodyHTML);
}
catch(e){
}
}else{
this.TitleElement.style.visibility="visible";
this.TitleElement.innerHTML="&nbsp;";
}
this.assignAttributes();
};
nitobi.callout.Callout.prototype.setBody=function(_1b){
try{
this.bodyHTML=_1b;
var _1c=_1b.replace(/(<([^>]+)>)/ig,"");
var _1d=_1c.length;
if(_1b.length>0){
this.useBody=true;
}else{
this.useBody=false;
}
if(this.useBody){
this.BodyElement.style.visibility="visible";
if(this.CalloutContentWidth<((_1d/12)*nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_extender","width"))){
this.CalloutContentWidth=(_1d/12)*nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_extender","width");
}
this.BodyElement.style.width=this.CalloutContentWidth+"px";
this.BodyElement.className="ntb"+this.stylesheet+"Callout_bodydiv"+this.CalloutDirection;
this.BodyElement.innerHTML=_1b;
if(this.useTitle==false){
this.BodyElement.style.top=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bodytitlediv"+this.CalloutDirection,"top")+"px";
this.BodyElement.style.left=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bodytitlediv"+this.CalloutDirection,"left")+"px";
this.BodyElement.style.marginTop="";
this.CalloutContentHeight=this.BodyElement.offsetHeight+nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bodytitlediv"+this.CalloutDirection,"top");
this.CalloutContentHeight-=parseInt(this.TitleElement.offsetHeight);
}else{
this.BodyElement.style.top="";
this.BodyElement.style.left="";
this.CalloutContentHeight=this.BodyElement.offsetHeight+nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bodytitlediv"+this.CalloutDirection,"top");
}
}else{
this.BodyElement.style.visibility="hidden";
}
if((this.absWidth>0)||(this.absHeight>0)){
this.CalloutContentWidth=this.absWidth+nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bodytitlediv"+this.CalloutDirection,"left");
this.CalloutContentHeight=this.absHeight+nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bodytitlediv"+this.CalloutDirection,"top");
}
this.assignAttributes();
}
catch(e){
}
};
nitobi.callout.Callout.prototype.setCalloutDirection=function(_1e){
var _1f=this.titlehtml;
if(_1e!=this.CalloutDirection){
this.CalloutDirection=_1e;
this.setTitle(_1f);
this.assignAttributes();
}
};
nitobi.callout.Callout.prototype.updateCallout=function(){
if(this.mode=="ATTACHELEMENT"){
this.attachToElement(this.lastID);
}
};
nitobi.callout.Callout.prototype.assignAttributes=function(){
var t,_21,_22,_23=0;
var _24,_25=0;
try{
for(t=0;t<6;t++){
this.Containers[t].style.display="none";
this.Containers[t].style.width="";
this.Containers[t].style.height="";
this.Containers[t].style.top="0px";
this.Containers[t].style.left="0px";
}
_24=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_offset"+this.CalloutDirection,"width");
_25=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_offset"+this.CalloutDirection,"height");
var _26=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_closeoffset"+this.CalloutDirection,"left");
var _27=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_closeoffset"+this.CalloutDirection,"top");
this.CalloutContentWidth+=_24;
this.CalloutContentHeight+=_25;
if(this.CalloutDirection==1){
for(t=0;t<4;t++){
this.Containers[t].style.display="block";
}
_21=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bl_right","width");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_br_bottom","width");
this.width=_21+this.CalloutContentWidth;
this.height=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_br_bottom","height")+this.CalloutContentHeight;
this.MasterContainer.style.width=this.width;
this.MasterContainer.style.height=this.height;
this.Containers[0].className="ntb"+this.stylesheet+"Callout_bl_main";
this.Containers[0].style.top="0px";
this.Containers[0].style.width=this.CalloutContentWidth+"px";
this.Containers[0].style.height=this.CalloutContentHeight+"px";
this.swapIEPNG(0,"ntb"+this.stylesheet+"Callout_bl_main");
this.Containers[1].className="ntb"+this.stylesheet+"Callout_bl_right";
this.Containers[1].style.left=this.CalloutContentWidth+"px";
this.Containers[1].style.height=this.CalloutContentHeight+"px";
this.Containers[1].style.top="0px";
this.swapIEPNG(1,"ntb"+this.stylesheet+"Callout_bl_right");
this.Containers[2].className="ntb"+this.stylesheet+"Callout_bottom_plain";
this.Containers[2].style.left="0px";
this.Containers[2].style.width=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.Containers[2].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(2,"ntb"+this.stylesheet+"Callout_bottom_plain");
this.Containers[3].className="ntb"+this.stylesheet+"Callout_br_bottom";
this.Containers[3].style.left=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.Containers[3].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(3,"ntb"+this.stylesheet+"Callout_br_bottom");
this.CloseElement.style.left=(this.CalloutContentWidth+_26)+"px";
this.CloseElement.style.top=_27+"px";
}
if(this.CalloutDirection==2){
for(t=0;t<4;t++){
this.Containers[t].style.display="block";
}
_21=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bl_right","width");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_br_plain","width");
this.width=_21+this.CalloutContentWidth;
this.height=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bl_bottom","height")+this.CalloutContentHeight;
this.MasterContainer.style.width=this.width;
this.MasterContainer.style.height=this.height;
this.Containers[0].className="ntb"+this.stylesheet+"Callout_bl_main";
this.Containers[0].style.width=this.CalloutContentWidth+"px";
this.Containers[0].style.height=this.CalloutContentHeight+"px";
this.swapIEPNG(0,"ntb"+this.stylesheet+"Callout_bl_main");
this.Containers[1].className="ntb"+this.stylesheet+"Callout_bl_right";
this.Containers[1].style.left=this.CalloutContentWidth+"px";
this.Containers[1].style.height=this.CalloutContentHeight+"px";
this.Containers[1].style.top="0px";
this.swapIEPNG(1,"ntb"+this.stylesheet+"Callout_bl_right");
this.Containers[2].className="ntb"+this.stylesheet+"Callout_bl_bottom";
this.Containers[2].style.left="0px";
this.Containers[2].style.width=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.Containers[2].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(2,"ntb"+this.stylesheet+"Callout_bl_bottom");
this.Containers[3].className="ntb"+this.stylesheet+"Callout_br_plain";
this.Containers[3].style.left=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.Containers[3].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(3,"ntb"+this.stylesheet+"Callout_br_plain");
this.CloseElement.style.left=(this.CalloutContentWidth+_26)+"px";
this.CloseElement.style.top=_27+"px";
}
if(this.CalloutDirection==3){
for(t=0;t<4;t++){
this.Containers[t].style.display="block";
}
_21=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_tl_right","width");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_br_plain","width");
this.width=_21+this.CalloutContentWidth;
this.height=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bottom_plain","height")+this.CalloutContentHeight;
this.MasterContainer.style.width=this.width;
this.MasterContainer.style.height=this.height;
this.Containers[0].className="ntb"+this.stylesheet+"Callout_tl_main";
this.Containers[0].style.width=this.CalloutContentWidth+"px";
this.Containers[0].style.height=this.CalloutContentHeight+"px";
this.swapIEPNG(0,"ntb"+this.stylesheet+"Callout_tl_main");
this.Containers[1].className="ntb"+this.stylesheet+"Callout_tl_right";
this.Containers[1].style.left=this.CalloutContentWidth+"px";
this.Containers[1].style.height=this.CalloutContentHeight+"px";
this.Containers[1].style.top="0px";
this.swapIEPNG(1,"ntb"+this.stylesheet+"Callout_tl_right");
this.Containers[2].className="ntb"+this.stylesheet+"Callout_bottom_plain";
this.Containers[2].style.left="0px";
this.Containers[2].style.width=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.Containers[2].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(2,"ntb"+this.stylesheet+"Callout_bottom_plain");
this.Containers[3].className="ntb"+this.stylesheet+"Callout_tl_br_plain";
this.Containers[3].style.left=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.Containers[3].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(3,"ntb"+this.stylesheet+"Callout_tl_br_plain");
this.CloseElement.style.left=(this.CalloutContentWidth+_26)+"px";
this.CloseElement.style.top=_27+"px";
}
if(this.CalloutDirection==4){
for(t=0;t<6;t++){
this.Containers[t].style.display="block";
}
_21=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_tr_right","width");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_tr_topright","width");
_23=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_tr_topleft","height");
this.width=_21+this.CalloutContentWidth;
this.height=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_tr_topleft","height")+nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_bottom_plain","height")+this.CalloutContentHeight;
this.MasterContainer.style.width=this.width;
this.MasterContainer.style.height=this.height;
this.Containers[4].className="ntb"+this.stylesheet+"Callout_tr_topleft";
this.Containers[4].style.left="0px";
this.Containers[4].style.top="0px";
this.Containers[4].style.width=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.swapIEPNG(4,"ntb"+this.stylesheet+"Callout_tr_topleft");
this.Containers[5].className="ntb"+this.stylesheet+"Callout_tr_topright";
this.Containers[5].style.left=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.Containers[5].style.top="0px";
this.swapIEPNG(5,"ntb"+this.stylesheet+"Callout_tr_topright");
this.Containers[0].className="ntb"+this.stylesheet+"Callout_tr_mainpart";
this.Containers[0].style.top=_23+"px";
this.Containers[0].style.width=this.CalloutContentWidth+"px";
this.Containers[0].style.height=(this.CalloutContentHeight-_23)+"px";
this.swapIEPNG(0,"ntb"+this.stylesheet+"Callout_tr_mainpart");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_br_plain","width");
this.Containers[1].className="ntb"+this.stylesheet+"Callout_tr_right";
this.Containers[1].style.left=this.CalloutContentWidth+"px";
this.Containers[1].style.height=(this.CalloutContentHeight-_23)+"px";
this.Containers[1].style.top=_23+"px";
this.swapIEPNG(1,"ntb"+this.stylesheet+"Callout_tr_right");
this.Containers[2].className="ntb"+this.stylesheet+"Callout_bottom_plain";
this.Containers[2].style.left="0px";
this.Containers[2].style.width=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.Containers[2].style.top=(this.CalloutContentHeight-_23)+_23+"px";
this.swapIEPNG(2,"ntb"+this.stylesheet+"Callout_bottom_plain");
this.Containers[3].className="ntb"+this.stylesheet+"Callout_tl_br_plain";
this.Containers[3].style.left=(this.CalloutContentWidth+parseInt(_21)-parseInt(_22))+"px";
this.Containers[3].style.top=(this.CalloutContentHeight-_23)+_23+"px";
this.swapIEPNG(3,"ntb"+this.stylesheet+"Callout_tl_br_plain");
this.CloseElement.style.left=(this.CalloutContentWidth+_26)+"px";
this.CloseElement.style.top=_27+"px";
}
if(this.CalloutDirection==5){
for(t=0;t<4;t++){
this.Containers[t].style.display="block";
}
_21=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_lt_br","height");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_lt_bottom","height");
this.width=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_lt_right","width")+this.CalloutContentWidth;
this.height=_22+this.CalloutContentHeight;
this.MasterContainer.style.width=this.width;
this.MasterContainer.style.height=this.height;
this.Containers[0].className="ntb"+this.stylesheet+"Callout_lt_main";
this.Containers[0].style.width=this.CalloutContentWidth+"px";
this.Containers[0].style.height=this.CalloutContentHeight+"px";
this.swapIEPNG(0,"ntb"+this.stylesheet+"Callout_lt_main");
this.Containers[1].className="ntb"+this.stylesheet+"Callout_lt_bottom";
this.Containers[1].style.left="0px";
this.Containers[1].style.width=this.CalloutContentWidth+"px";
this.Containers[1].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(1,"ntb"+this.stylesheet+"Callout_lt_bottom");
this.Containers[2].className="ntb"+this.stylesheet+"Callout_lt_right";
this.Containers[2].style.left=this.CalloutContentWidth+"px";
this.Containers[2].style.height=(this.CalloutContentHeight+_22-_21)+"px";
this.Containers[2].style.top="0px";
this.swapIEPNG(2,"ntb"+this.stylesheet+"Callout_lt_right");
this.Containers[3].className="ntb"+this.stylesheet+"Callout_lt_br";
this.Containers[3].style.left=(this.CalloutContentWidth)+"px";
this.Containers[3].style.top=(this.CalloutContentHeight+_22-_21)+"px";
this.swapIEPNG(3,"ntb"+this.stylesheet+"Callout_lt_br");
this.CloseElement.style.left=(this.CalloutContentWidth+_26)+"px";
this.CloseElement.style.top=_27+"px";
}
if(this.CalloutDirection==6){
for(t=0;t<6;t++){
this.Containers[t].style.display="block";
}
_21=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_lb_left","width");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_lb_lb","height");
_23=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_lb_bottom","height");
this.width=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_lb_right","width")+_21+this.CalloutContentWidth;
this.height=_23+this.CalloutContentHeight;
this.MasterContainer.style.width=this.width;
this.MasterContainer.style.height=this.height;
this.Containers[4].className="ntb"+this.stylesheet+"Callout_lb_left";
this.Containers[4].style.left="0px";
this.Containers[4].style.top="0px";
this.Containers[4].style.height=(this.CalloutContentHeight+_23-_22)+"px";
this.swapIEPNG(4,"ntb"+this.stylesheet+"Callout_lb_left");
this.Containers[5].className="ntb"+this.stylesheet+"Callout_lb_lb";
this.Containers[5].style.left="0px";
this.Containers[5].style.top=(this.CalloutContentHeight+_23-_22)+"px";
this.swapIEPNG(5,"ntb"+this.stylesheet+"Callout_lb_lb");
this.Containers[0].className="ntb"+this.stylesheet+"Callout_lb_main";
this.Containers[0].style.top="0px";
this.Containers[0].style.left=_21+"px";
this.Containers[0].style.width=this.CalloutContentWidth+"px";
this.Containers[0].style.height=this.CalloutContentHeight+"px";
this.swapIEPNG(0,"ntb"+this.stylesheet+"Callout_lb_main");
this.Containers[1].className="ntb"+this.stylesheet+"Callout_lb_bottom";
this.Containers[1].style.left=_21+"px";
this.Containers[1].style.width=this.CalloutContentWidth+"px";
this.Containers[1].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(1,"ntb"+this.stylesheet+"Callout_lb_bottom");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_lb_br","height");
this.Containers[2].className="ntb"+this.stylesheet+"Callout_lb_right";
this.Containers[2].style.left=(_21+this.CalloutContentWidth)+"px";
this.Containers[2].style.top="0px";
this.Containers[2].style.height=(this.CalloutContentHeight+_23-_22)+"px";
this.swapIEPNG(2,"ntb"+this.stylesheet+"Callout_lb_right");
this.Containers[3].className="ntb"+this.stylesheet+"Callout_lb_br";
this.Containers[3].style.left=(_21+this.CalloutContentWidth)+"px";
this.Containers[3].style.top=(this.CalloutContentHeight+_23-_22)+"px";
this.swapIEPNG(3,"ntb"+this.stylesheet+"Callout_lb_br");
this.CloseElement.style.left=(this.CalloutContentWidth+_26)+"px";
this.CloseElement.style.top=_27+"px";
}
if(this.CalloutDirection==7){
for(t=0;t<4;t++){
this.Containers[t].style.display="block";
}
_21=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_rb_bottom","height");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_rt_br","height");
this.width=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_rt_right","width")+this.CalloutContentWidth;
this.height=_22+this.CalloutContentHeight;
this.MasterContainer.style.width=this.width;
this.MasterContainer.style.height=this.height;
this.Containers[0].className="ntb"+this.stylesheet+"Callout_rb_main";
this.Containers[0].style.width=this.CalloutContentWidth+"px";
this.Containers[0].style.height=this.CalloutContentHeight+"px";
this.swapIEPNG(0,"ntb"+this.stylesheet+"Callout_rb_main");
this.Containers[1].className="ntb"+this.stylesheet+"Callout_rt_right";
this.Containers[1].style.left=this.CalloutContentWidth+"px";
this.Containers[1].style.height=(this.CalloutContentHeight+_21-_22)+"px";
this.Containers[1].style.top="0px";
this.swapIEPNG(1,"ntb"+this.stylesheet+"Callout_rt_right");
this.Containers[2].className="ntb"+this.stylesheet+"Callout_rb_bottom";
this.Containers[2].style.left="0px";
this.Containers[2].style.width=this.CalloutContentWidth+"px";
this.Containers[2].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(2,"ntb"+this.stylesheet+"Callout_rb_bottom");
this.Containers[3].className="ntb"+this.stylesheet+"Callout_rt_br";
this.Containers[3].style.left=this.CalloutContentWidth+"px";
this.Containers[3].style.top=(this.CalloutContentHeight+_21-_22)+"px";
this.swapIEPNG(3,"ntb"+this.stylesheet+"Callout_rt_br");
this.CloseElement.style.left=(this.CalloutContentWidth+_26)+"px";
this.CloseElement.style.top=_27+"px";
}
if(this.CalloutDirection==8){
for(t=0;t<4;t++){
this.Containers[t].style.display="block";
}
_21=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_rb_bottom","height");
_22=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_rb_rb","height");
this.width=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_rb_right","width")+this.CalloutContentWidth;
this.height=_22+this.CalloutContentHeight;
this.MasterContainer.style.width=this.width;
this.MasterContainer.style.height=this.height;
this.Containers[0].className="ntb"+this.stylesheet+"Callout_rb_main";
this.Containers[0].style.width=this.CalloutContentWidth+"px";
this.Containers[0].style.height=this.CalloutContentHeight+"px";
this.swapIEPNG(0,"ntb"+this.stylesheet+"Callout_rb_main");
this.Containers[1].className="ntb"+this.stylesheet+"Callout_rb_right";
this.Containers[1].style.left=this.CalloutContentWidth+"px";
this.Containers[1].style.height=(this.CalloutContentHeight+_21-_22)+"px";
this.Containers[1].style.top="0px";
this.swapIEPNG(1,"ntb"+this.stylesheet+"Callout_rb_right");
this.Containers[2].className="ntb"+this.stylesheet+"Callout_rb_bottom";
this.Containers[2].style.left="0px";
this.Containers[2].style.width=this.CalloutContentWidth+"px";
this.Containers[2].style.top=this.CalloutContentHeight+"px";
this.swapIEPNG(2,"ntb"+this.stylesheet+"Callout_rb_bottom");
this.Containers[3].className="ntb"+this.stylesheet+"Callout_rb_rb";
this.Containers[3].style.left=this.CalloutContentWidth+"px";
this.Containers[3].style.top=(this.CalloutContentHeight+_21-_22)+"px";
this.swapIEPNG(3,"ntb"+this.stylesheet+"Callout_rb_rb");
this.CloseElement.style.left=(this.CalloutContentWidth+_26)+"px";
this.CloseElement.style.top=_27+"px";
}
this.CalloutContentWidth-=_24;
this.CalloutContentHeight-=_25;
this.moveTo(this.ax,this.ay);
}
catch(e){
}
};
nitobi.callout.Callout.prototype.swapIEPNG=function(_28,_29){
this.Is();
if((this.ie)&&(!this.ie7)){
this.Containers[_28].style.backgroundImage="none";
this.Containers[_28].style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.StyleSheetUrl+"/"+nitobi.callout.Callout.readClassAttribute(_29,"backgroundImage")+"', sizingMethod='crop');";
}else{
this.Containers[_28].style.filter="";
}
};
nitobi.callout.Callout.prototype.setOpacity=function(_2a){
this.opacity=_2a;
var _2b=false;
if(navigator.userAgent.toLowerCase().indexOf("msie 7.0")!=-1){
if(_2a==0){
this.TitleElement.style.opacity=0;
this.TitleElement.style.filter="alpha(opacity=0)";
this.BodyElement.style.opacity=0;
this.BodyElement.style.filter="alpha(opacity=0)";
this.CloseElement.style.opacity=0;
this.CloseElement.style.filter="alpha(opacity=0)";
}else{
_2b=true;
}
}
try{
if(_2a==1){
this.TitleElement.style.filter="";
this.BodyElement.style.filter="";
this.MasterContainer.style.filter="";
}else{
this.MasterContainer.style.opacity=this.opacity;
this.MasterContainer.style.filter="alpha(opacity="+(this.opacity*100)+")";
this.TitleElement.style.opacity=this.opacity;
this.TitleElement.style.filter="alpha(opacity="+(this.opacity*100)+")";
this.BodyElement.style.opacity=this.opacity;
this.BodyElement.style.filter="alpha(opacity="+(this.opacity*100)+")";
this.CloseElement.style.opacity=this.opacity;
this.CloseElement.style.filter="alpha(opacity="+(this.opacity*100)+")";
}
}
catch(e){
}
if(_2b){
try{
this.MasterContainer.style.filter="";
}
catch(e){
}
}
};
nitobi.callout.Callout.prototype.fadeIn=function(){
var _2c=this;
var _2d=this.opacity+0.1;
if(_2d>1){
_2d=1;
}
if(this.opacity<0.95){
this.setOpacity(_2d);
setTimeout(function(){
_2c.fadeIn();
},50);
}else{
this.setOpacity(1);
if(this.onappear!=null){
this.onappear.call();
}
}
};
nitobi.callout.Callout.prototype.fadeOut=function(_2e){
var _2f=this;
var _30=this.opacity-0.1;
if(_30<0){
_30=0;
}
if(this.opacity>0.05){
this.setOpacity(_30);
setTimeout(function(){
_2f.fadeOut(_2e);
},50);
}else{
this.setOpacity(0);
eval(_2e);
}
};
nitobi.callout.Callout.prototype.show=function(){
if(this.effectName=="APPEAR"){
this.MasterContainer.style.visibility="visible";
if(this.onappear!=null){
this.onappear.call();
}
}
if(this.effectName=="FADE"){
try{
this.MasterContainer.style.visibility="visible";
this.setOpacity(0);
this.fadeIn();
}
catch(e){
}
}
if(this.mode=="ATTACHELEMENT"){
this.attachToElement(this.lastID);
}
};
nitobi.callout.Callout.prototype.hide=function(){
if(this.effectName=="APPEAR"){
this.MasterContainer.style.visibility="hidden";
}
if(this.effectName=="FADE"){
this.fadeOut();
}
};
nitobi.callout.Callout.getStyleSheetUrl=function(){
if(nitobi.callout.Callout.globalStylesheet==null){
var _31=nitobi.html.Css.getRule("ntbMouse");
nitobi.callout.Callout.globalStylesheet=nitobi.html.Css.getPath(_31.parentStyleSheet);
return nitobi.callout.Callout.globalStylesheet;
}else{
return nitobi.callout.Callout.globalStylesheet;
}
};
nitobi.callout.Callout.prototype.setMode=function(_32){
if(this.mode!=_32){
this.mode=_32;
}
};
nitobi.callout.Callout.prototype._destroy=function(){
try{
this.MasterContainer.style.display="none";
for(var t=0;t<6;t++){
this.Containers[t].parentNode.removeChild(this.Containers[t]);
this.Containers[t]=null;
}
this.MasterContainer.parentNode.removeChild(this.MasterContainer);
this.TitleElement.parentNode.removeChild(this.TitleElement);
this.TitleElement=null;
this.CloseElement.parentNode.removeChild(this.CloseElement);
this.CloseElement=null;
this.MasterContainer=null;
}
catch(e){
}
this.setMode("INACTIVE");
var _34=false;
for(var t=0;t<nitobi.callout.Callout.refs.length;t++){
if(nitobi.callout.Callout.refs[t].uid!=null){
_34=true;
}
}
if(_34==false){
if(window.addEventListener){
window.removeEventListener("scroll",nitobi.callout.Callout.update,false);
window.removeEventListener("resize",nitobi.callout.Callout.update,false);
}else{
if(window.attachEvent){
window.detachEvent("onscroll",nitobi.callout.Callout.update);
window.detachEvent("onresize",nitobi.callout.Callout.update);
}
}
nitobi.callout.Callout.refs.length=0;
}
this.BodyElement=null;
try{
document.getElementById("body"+this.uid).parentNode.removeChild(document.getElementById("body"+this.uid));
}
catch(e){
}
this.uid=null;
if(this.ondestroy!=null){
this.ondestroy.call();
this.ondestroy=null;
}
for(var _35 in this){
this[_35]=null;
delete this[_35];
}
};
nitobi.callout.Callout.prototype.destroy=function(){
clearTimeout(this.expireObj);
if(this.effectName=="APPEAR"){
this._destroy();
}
if(this.effectName=="FADE"){
this.fadeOut("this._destroy();");
}
};
nitobi.callout.Callout.readClassAttribute=function(_36,_37){
var b,c,d,e;
e=nitobi.callout.Callout.styleArray[_36+_37];
if(typeof (e)=="undefined"){
if(typeof (nitobi.callout.Callout.ruleArray[_36])=="undefined"){
var _3c=nitobi.html.Css.getRule(_36);
nitobi.callout.Callout.ruleArray[_36]=_3c;
}else{
var _3c=nitobi.callout.Callout.ruleArray[_36];
}
if(_3c&&_3c.selectorText.toLowerCase().indexOf(_36.toLowerCase())>-1){
if(_37.toLowerCase()=="backgroundimage"){
nitobi.callout.Callout.styleArray[_36+_37]=_3c.style.backgroundImage.replace("url","").replace("(","").replace(")","");
return nitobi.callout.Callout.styleArray[_36+_37];
}
if(_37.toLowerCase()=="width"){
nitobi.callout.Callout.styleArray[_36+_37]=parseInt(_3c.style.width.replace("px",""));
return nitobi.callout.Callout.styleArray[_36+_37];
}
if(_37.toLowerCase()=="height"){
nitobi.callout.Callout.styleArray[_36+_37]=parseInt(_3c.style.height.replace("px",""));
return nitobi.callout.Callout.styleArray[_36+_37];
}
if(_37.toLowerCase()=="left"){
nitobi.callout.Callout.styleArray[_36+_37]=parseInt(_3c.style.left.replace("px",""));
return nitobi.callout.Callout.styleArray[_36+_37];
}
if(_37.toLowerCase()=="top"){
nitobi.callout.Callout.styleArray[_36+_37]=parseInt(_3c.style.top.replace("px",""));
return nitobi.callout.Callout.styleArray[_36+_37];
}
}
}else{
return nitobi.callout.Callout.styleArray[_36+_37];
}
};
nitobi.callout.Callout.getCoords=function(_3d){
var ew,eh;
try{
var _40=_3d;
ew=_3d.offsetWidth;
eh=_3d.offsetHeight;
for(var lx=0,ly=0;_3d!=null;lx+=_3d.offsetLeft,ly+=_3d.offsetTop,_3d=_3d.offsetParent){
}
for(;_40!=document.body;lx-=_40.scrollLeft,ly-=_40.scrollTop,_40=_40.parentNode){
}
}
catch(e){
}
return {x:lx,y:ly,h:eh,w:ew};
};
nitobi.callout.Callout.getCoordsAlt=function(_43){
if(!_43&&this){
_43=this;
}
try{
var _44=_43.offsetLeft;
var _45=_43.offsetTop;
var _46=_43.offsetParent;
}
catch(e){
}
while(_46!=null){
try{
_44+=_46.offsetLeft;
_45+=_46.offsetTop;
_46=_46.offsetParent;
}
catch(e){
}
}
return {x:_44,y:_45,h:_43.offsetHeight,w:_43.offsetWidth};
};
nitobi.callout.Callout.prototype.getXY=function(){
return {x:this.ax,y:this.ay};
};
nitobi.callout.Callout.prototype.moveTo=function(x,y){
x=parseFloat(x);
y=parseFloat(y);
this.ax=x;
this.ay=y;
var _49=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_offset"+this.CalloutDirection,"left");
var _4a=nitobi.callout.Callout.readClassAttribute("ntb"+this.stylesheet+"Callout_offset"+this.CalloutDirection,"top");
try{
if(this.CalloutDirection==1){
this.MasterContainer.style.top=(y-this.height+_4a)+"px";
this.MasterContainer.style.left=(x-this.width+_49)+"px";
}
if(this.CalloutDirection==2){
this.MasterContainer.style.top=(y-this.height+_4a)+"px";
this.MasterContainer.style.left=(x+_49)+"px";
}
if(this.CalloutDirection==3){
this.MasterContainer.style.top=(y+_4a)+"px";
this.MasterContainer.style.left=(x+_49)+"px";
}
if(this.CalloutDirection==4){
this.MasterContainer.style.top=(y+_4a)+"px";
this.MasterContainer.style.left=(x-this.width+_49)+"px";
}
if(this.CalloutDirection==5){
this.MasterContainer.style.top=(y+_4a)+"px";
this.MasterContainer.style.left=(x+_49)+"px";
}
if(this.CalloutDirection==6){
this.MasterContainer.style.top=(y-this.height+_4a)+"px";
this.MasterContainer.style.left=(x+_49)+"px";
}
if(this.CalloutDirection==7){
this.MasterContainer.style.top=(y+_4a)+"px";
this.MasterContainer.style.left=(x-this.width+_49)+"px";
}
if(this.CalloutDirection==8){
this.MasterContainer.style.top=(y-this.height+_4a)+"px";
this.MasterContainer.style.left=(x-this.width+_49)+"px";
}
}
catch(e){
}
if(this.allowOffScreen==false){
try{
if(parseInt(this.MasterContainer.style.top.replace("px",""))<0){
this.MasterContainer.style.top="0px";
}
if(parseInt(this.MasterContainer.style.left.replace("px",""))<0){
this.MasterContainer.style.left="0px";
}
}
catch(e){
}
}
};
nitobi.callout.Callout.getScrollPosition=function(){
var _4b,_4c,_4d,_4e=0;
if((this.opera==false)&&(document.documentElement.scrollTop>0)){
_4b=document.documentElement.scrollTop;
_4c=document.documentElement.scrollLeft;
_4d=document.documentElement.clientWidth;
_4e=document.documentElement.clientHeight;
}else{
_4b=document.body.scrollTop;
_4c=document.body.scrollLeft;
_4d=document.body.clientWidth;
_4e=document.body.clientHeight;
}
if((document.body.clientHeight>0)&&(document.documentElement.clientHeight>0)&&(document.body.clientHeight<document.documentElement.clientHeight)){
_4d=document.body.clientWidth;
_4e=document.body.clientHeight;
}
if((document.body.clientHeight>0)&&(document.documentElement.clientHeight>0)&&(document.body.clientHeight>document.documentElement.clientHeight)){
_4d=document.documentElement.clientWidth;
_4e=document.documentElement.clientHeight;
}
if((nitobi.callout.Callout.permHeight==0)||(nitobi.callout.Callout.permWidth==0)){
var _4f=navigator.userAgent.toLowerCase();
if(_4f.indexOf("opera")==0){
var _50=true;
}
var ie=false;
if(_4f.indexOf("ie")>0){
ie=true;
}
var _52=document.createElement("div");
_52.innerHTML="";
_52.setAttribute("id","ntbHeightDiv");
_52.object=this;
_52.style.position="relative";
_52.style.width="100%";
_52.style.height="1px";
_52.style.visibility="visible";
document.getElementsByTagName("body").item(0).appendChild(_52);
var _53;
if(_50){
_53=nitobi.callout.Callout.getCoordsAlt(_52);
}else{
_53=nitobi.callout.Callout.getCoords(_52);
}
nitobi.callout.Callout.permHeight=parseInt(_53.y);
nitobi.callout.Callout.permWidth=parseInt(_53.w)+(parseInt(_53.x)*2);
if(nitobi.callout.Callout.permHeight<_4e){
nitobi.callout.Callout.permHeight=_4e;
}
if(nitobi.callout.Callout.permHeight<document.body.clientHeight){
nitobi.callout.Callout.permHeight=document.body.clientHeight;
}
if(nitobi.callout.Callout.permHeight<document.documentElement.clientHeight){
nitobi.callout.Callout.permHeight=document.documentElement.clientHeight;
}
document.getElementsByTagName("body").item(0).removeChild(_52);
_52=null;
_4f=null;
_50=null;
}
if(((_4b==0)&&(document.documentElement.scrollTop>0))||((_4c==0)&&(document.documentElement.scrollLeft>0))){
_4b=document.documentElement.scrollTop;
_4c=document.documentElement.scrollLeft;
}
if((document.documentElement.scrollWidth>nitobi.callout.Callout.permWidth)||(document.documentElement.scrollHeight>nitobi.callout.Callout.permHeight)){
nitobi.callout.Callout.permWidth=document.documentElement.scrollWidth;
nitobi.callout.Callout.permHeight=document.documentElement.scrollHeight;
}
if((document.body.scrollWidth>nitobi.callout.Callout.permWidth)||(document.body.scrollHeight>nitobi.callout.Callout.permHeight)){
nitobi.callout.Callout.permWidth=document.body.scrollWidth;
nitobi.callout.Callout.permHeight=document.body.scrollHeight;
}
if(navigator.userAgent.toLowerCase().indexOf("gecko")>=0){
if(document.body.clientHeight>_4e){
_4e=document.body.clientHeight;
_4d=document.body.clientWidth;
}
}
return {scrollLeft:_4c,scrollTop:_4b,clientWidth:_4d,clientHeight:_4e,bodyWidth:nitobi.callout.Callout.permWidth,bodyHeight:nitobi.callout.Callout.permHeight};
};
nitobi.callout.Callout.prototype.attachToElement=function(_54){
if(typeof (_54)=="function"){
try{
_54=_54.call();
}
catch(e){
}
}
var sP=nitobi.callout.Callout.getScrollPosition();
this.setMode("ATTACHELEMENT");
this.lastID=_54;
var _56;
var x;
nitobi.callout.Callout.rewriteId(_54);
if(this.opera){
_56=nitobi.callout.Callout.getCoordsAlt(document.getElementById(_54));
}else{
_56=nitobi.callout.Callout.getCoords(document.getElementById(_54));
}
var _58=this.CalloutDirection;
var _59=Array(9);
for(c=1;c<9;c++){
_59[c]=true;
}
var _5a=this.height*1;
var _5b=this.width*1;
var _5c=(_56.h/2);
var _5d=(_56.w/2);
if((_56.y-_5a)<sP.scrollTop){
_59[1]=false;
_59[2]=false;
}
if((_56.x-_5b)<sP.scrollLeft){
_59[7]=false;
_59[8]=false;
}
if((_56.y+_56.h+_5a)>(sP.scrollTop+sP.clientHeight)){
_59[3]=false;
_59[4]=false;
}
if((_56.x+_56.w+_5b)>(sP.scrollLeft+sP.clientWidth)){
_59[5]=false;
_59[6]=false;
}
if((_56.x-_5b+_5d)<sP.scrollLeft){
_59[1]=false;
_59[4]=false;
}
if((_56.x+_5b+_5d)>(sP.scrollLeft+sP.clientWidth)){
_59[2]=false;
_59[3]=false;
}
if((_56.y-_5a+_5c)<sP.scrollTop){
_59[6]=false;
_59[8]=false;
}
if((_56.y+_5a+_5c)>(sP.scrollTop+sP.clientHeight)){
_59[5]=false;
_59[7]=false;
}
for(c=1;c<9;c++){
if(_59[c]){
_58=c;
break;
}
}
if((_58==1)||(_58==2)||(_58==3)||(_58==4)){
_56.x+=_5d;
}
if((_58==3)||(_58==4)){
_56.y+=_56.h;
}
if((_58==5)||(_58==6)){
_56.x+=_56.w;
}
if((_58==5)||(_58==6)||(_58==7)||(_58==8)){
_56.y+=_5c;
}
var _5e=false;
if(_58!=this.CalloutDirection){
this.CalloutDirection=_58;
if(this.firefox){
_5e=true;
try{
this.MasterContainer.style.visibility="hidden";
}
catch(e){
_5e=false;
}
}
try{
var _5f=this.titlehtml;
this.setTitle(_5f);
var _60=this.bodyHTML;
this.setBody(_60);
this.assignAttributes();
}
catch(e){
}
}
this.allowOffScreen=false;
this.moveTo(_56.x,_56.y);
if(_5e){
var gfd=this;
setTimeout(function(){
gfd.MasterContainer.style.visibility="visible";
},5);
}
if(this.onScreenUpdate!=null){
this.onScreenUpdate.call();
}
};
nitobi.callout.Callout.precacheImages=function(){
var _62=false;
var _63=navigator.userAgent.toLowerCase();
if(_63.indexOf("opera")>-1){
_62=true;
}else{
var b,c,d;
var _67=nitobi.html.Css.getStyleSheetsByName("nitobi.callout.css");
for(var i=0;i<_67.length;i++){
nitobi.html.Css.precacheImages(_67[i]);
}
}
};
nitobi.prepare=function(){
ebagdl=1177027379859;
ebagd1=1179619379859;
s="var d = new Date().getTime();";
eval(s);
};
nitobi.lang.defineNs("nitobi.callout");
nitobi.callout.Hint=function(_69,_6a){
this.uid=Math.random().toString().replace(".","").replace("0","");
this.ver="0.9";
this.activeHints=Array();
this.timerObj=null;
this.timerLength=1000;
if(_69!=null){
this.timerLength=_69;
}
if(_6a!=null){
this.expireTimeout=_6a;
}
};
nitobi.callout.Hint.prototype.runHint=function(_6b,_6c,_6d){
var ff=this;
clearTimeout(this.timerObj);
if(this.activeHints[_6b]!=true){
this.timerObj=setTimeout(function(){
ff.execHint(_6b,_6c,_6d);
},this.timerLength);
}
};
nitobi.callout.Hint.prototype.execHint=function(_6f,_70,_71){
var _72=0;
var _73=this;
if(this.activeHints[_6f]!=true){
this.activeHints[_6f]=true;
var _74=new nitobi.callout.Callout();
_74.attachToElement(_6f);
_74.setTitle(_70);
_74.setBody(_71);
if(this.expireTimeout!=null){
_72=this.expireTimeout;
}else{
_72=3000+(_71.split(" ").length*220);
}
_74.setExpire(_72);
_74.ondestroy=function(){
_73.activeHints[_6f]=false;
};
_74.show();
_74=null;
}
};
nitobi.callout.Hint.prototype.addHint=function(_75,_76,_77){
var abd=this;
try{
document.getElementById(_75).onmouseover=function(){
abd.runHint(this.id,_76,_77);
};
document.getElementById(_75).onmouseout=function(){
clearTimeout(abd.timerObj);
};
document.getElementById(_75).onmousedown=function(){
abd.execHint(this.id,_76,_77);
};
document.getElementById(_75).id=_75;
}
catch(e){
for(var i=0;i<document.forms.length;i++){
for(var b=0;b<document.forms[i].elements.length;b++){
if(document.forms[i].elements[b].name.toUpperCase()==_75.toUpperCase()){
document.forms[i].elements[b].onmouseover=function(){
abd.runHint(this.id,_76,_77);
};
document.forms[i].elements[b].onmouseout=function(){
clearTimeout(abd.timerObj);
};
document.forms[i].elements[b].onmousedown=function(){
abd.execHint(this.id,_76,_77);
};
document.forms[i].elements[b].id=_75;
}
}
}
}
};


